"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LegacyPluginBuilder=void 0;const legacy_module_model_impl_js_1=require("../../model/module/legacy-module-model-impl.js"),legacy_hap_plugin_js_1=require("../legacy/legacy-hap-plugin.js"),legacy_project_model_impl_js_1=require("../../model/project/legacy-project-model-impl.js"),hap_extra_info_js_1=require("../../project/data/hap-extra-info.js"),common_const_js_1=require("../../const/common-const.js"),legacy_har_plugin_js_1=require("../legacy/legacy-har-plugin.js");class LegacyPluginBuilder{constructor(e){this.module=e}setUpModulePlugin(e){e.initModuleTaskService(!0),e.initTargetDepends(),e.doModuleInspection(),e.initModuleCommonTasks(),e.initModuleCommonTasksForDiffApiType(!0)}createFaHapPlugin(){return this.initPluginParam(new legacy_hap_plugin_js_1.LegacyHapPlugin(this.module),!0)}createFaHarPlugin(){return this.initPluginParam(new legacy_har_plugin_js_1.LegacyHarPlugin(this.module),!1)}initPluginParam(e,l){const o=this.createProjectModel(),i=this.createModuleModel(o,l);return o.saveSubModuleModel(i),e.withProjectModel(o).withModuleModel(i).withPluginApiType(hap_extra_info_js_1.ApiType.FA).withRuntimeConfigFileName(common_const_js_1.CommonConst.CONFIG_JSON)}createProjectModel(){const e=this.module.getProject();return legacy_project_model_impl_js_1.LegacyProjectModelImpl.getInstance(e)}createModuleModel(e,l){const o=new legacy_module_model_impl_js_1.LegacyModuleModelImpl(this.module,e);return o.moduleBuildProfileCheck(l),o.processTargetsConfig(),o.initDefaultTargetSourceSet(),o}}exports.LegacyPluginBuilder=LegacyPluginBuilder;