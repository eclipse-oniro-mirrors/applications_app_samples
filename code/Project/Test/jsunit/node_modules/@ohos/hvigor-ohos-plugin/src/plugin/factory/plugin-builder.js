"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PluginBuilder=void 0;const project_model_impl_js_1=require("../../model/project/project-model-impl.js"),hap_plugin_js_1=require("../hap-plugin.js"),module_model_impl_js_1=require("../../model/module/module-model-impl.js"),hap_extra_info_js_1=require("../../project/data/hap-extra-info.js"),common_const_js_1=require("../../const/common-const.js"),har_plugin_js_1=require("../har-plugin.js");class PluginBuilder{constructor(e){this.module=e}createStageHapPlugin(){return this.initPluginParam(new hap_plugin_js_1.HapPlugin(this.module),!0)}createStageHarPlugin(){return this.initPluginParam(new har_plugin_js_1.HarPlugin(this.module),!1)}initPluginParam(e,o){const i=this.createProjectModel(),t=this.createModuleModel(i,o);return i.saveSubModuleModel(t),e.withProjectModel(i).withModuleModel(t).withPluginApiType(hap_extra_info_js_1.ApiType.STAGE).withRuntimeConfigFileName(common_const_js_1.CommonConst.MODULE_JSON5)}setUpModulePlugin(e){e.initModuleTaskService(!1),e.initTargetDepends(),e.doModuleInspection(),e.initModuleCommonTasks(),e.initModuleCommonTasksForDiffApiType(!1)}createProjectModel(){const e=this.module.getProject();return project_model_impl_js_1.ProjectModelImpl.getInstance(e)}createModuleModel(e,o){const i=new module_model_impl_js_1.ModuleModelImpl(this.module,e);return i.moduleBuildProfileCheck(o),i.processTargetsConfig(),i.initDefaultTargetSourceSet(),i}}exports.PluginBuilder=PluginBuilder;