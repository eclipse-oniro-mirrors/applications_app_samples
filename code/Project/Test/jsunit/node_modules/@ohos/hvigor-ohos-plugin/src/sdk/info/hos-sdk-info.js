"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HosSdkInfo=void 0;const hos_sdkmanager_common_1=require("@ohos/hos-sdkmanager-common"),time_util_js_1=require("@ohos/hvigor-base/src/util/time-util.js"),sdkmanager_common_1=require("@ohos/sdkmanager-common"),ohos_logger_js_1=require("../../utils/log/ohos-logger.js"),sdk_java_component_js_1=require("../impl/sdk-java-component.js"),sdk_toolchains_component_js_1=require("../impl/sdk-toolchains-component.js"),common_sdk_info_js_1=require("./common-sdk-info.js"),default_progress_js_1=require("../lib/default-progress.js"),sdk_util_js_1=require("../lib/sdk-util.js");class HosSdkInfo extends common_sdk_info_js_1.CommonSdkInfo{constructor(o,e,n){const s=process.hrtime();super(e,n),this._log=ohos_logger_js_1.OhosLogger.getLogger("Sdk"),this.localHosLibComponents=new Map,this.sdkDir=n,this.hosComponents=o;const t=hos_sdkmanager_common_1.HosPrjSdkConfig.builder(this.sdkDir).sdkProxy(sdk_util_js_1.proxyFun),a=new hos_sdkmanager_common_1.SimpleHosPrjSdkHandler(t,new default_progress_js_1.DefaultProgress);this.hosSdkInfoHandler=a.getSdkHandler(hos_sdkmanager_common_1.HosPrjSdkType.HARMONYOS),this.ohosSdkInfoHandler=a.getSdkHandler(hos_sdkmanager_common_1.HosPrjSdkType.OPENHARMONY);const h=[];this.hosComponents.forEach((o=>h.push(new sdkmanager_common_1.PathAndApiVersion(o,this.sdkVersion)))),this.downloadWithInitComponent(h,this.ohosSdkInfoHandler,this.localLibComponents);const i=new sdkmanager_common_1.PathAndApiVersion(sdkmanager_common_1.ComponentPath.TOOLCHAINS,this.sdkVersion);this.downloadWithInitComponent([i],this.hosSdkInfoHandler,this.localHosLibComponents,!1),this.ohJavaComponent=new sdk_java_component_js_1.SdkJavaComponent(this.findLocalComponent(sdkmanager_common_1.ComponentPath.TOOLCHAINS,this.localLibComponents)),this.hosJavaComponent=new sdk_java_component_js_1.SdkJavaComponent(this.findLocalComponent(sdkmanager_common_1.ComponentPath.TOOLCHAINS,this.localHosLibComponents)),this.hosToolchainsComponent=new sdk_toolchains_component_js_1.HosSdkToolchainsComponent(this.findLocalComponent(sdkmanager_common_1.ComponentPath.TOOLCHAINS,this.localHosLibComponents));const r=process.hrtime(s);this._log.debug(`Sdk init in ${(0,time_util_js_1.formatTime)(r)}`)}getRestool(){var o,e;return null!==(e=null===(o=this.toolchainsComponent)||void 0===o?void 0:o.getRestoolPath())&&void 0!==e?e:""}getHosResTool(){return this.hosJavaComponent.getRestoolPath()}getSdkHandler(){return this.hosSdkInfoHandler}getFormSchema(){return this.hosToolchainsComponent.getFormSchema()}getModuleSchema(){return this.hosToolchainsComponent.getHosModuleSchema()}getAppSchema(){return this.hosToolchainsComponent.getAppSchema()}getRichSchema(){return this.hosToolchainsComponent.getRichSchema()}getLiteSchema(){return this.hosToolchainsComponent.getLiteSchema()}getHapSignToolV2(){return this.hosToolchainsComponent.getHapSignToolV2()}getAbilityShellJar(){return this.hosJavaComponent.getAbilityShellJarPath()}getAceJar(){return this.hosJavaComponent.getAceJarPath()}getApkSignerJar(){return this.hosToolchainsComponent.getApkSignerJarPath()}getAJar(){return this.hosToolchainsComponent.getAJarPath()}getD8Jar(){return this.hosToolchainsComponent.getD8JarPath()}getAapt2Tool(){return this.hosToolchainsComponent.getAapt2ToolPath()}getOhosJar(){return this.hosJavaComponent.getOhosJarPath()}getHosModuleSchema(){return this.hosToolchainsComponent.getHosModuleSchema()}getReleaseType(){return this.hosToolchainsComponent.getReleaseType()}}exports.HosSdkInfo=HosSdkInfo;